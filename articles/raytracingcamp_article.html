<html>
<head>
<title>光線追跡法の欺瞞</title>
</head>
<body>
<center>
<h2>～夏休み緊急特別企画～</h2>
<h1>光線追跡法の欺瞞</h1><br>
</center>
これは<a href="https://sites.google.com/site/raytracingcamp2/">レイトレ合宿2アドベントカレンダー</a>第10週目の記事である。<br>
<h3>まえおき</h3>
最近はコンピュータの高性能化と物理ベースレンダリングの発達によって非常にリアルな映像をつくられるようになった。<br>
そのときによく使われている技術が光線追跡法(Raytracing, 通称レイトレ)である。<br>
だが, レイトレには欺瞞が隠されているようである。<br>
物理ベースと言われているが, 本当にレイトレは物理的に正しいのだろうか?<br>

<h3>物が見えるしくみ</h3>
光が目に入り, 光が網膜にある細胞を刺激し, その信号が神経を通って脳に伝わり処理されることによって人間は物を見ている。<br>
目に入る光は, 光源から出た光が直接目に入る場合もあれば, ものにあたって反射して入る場合もある。<br>
光源から出発した光は反射や屈折を何度も繰り返してから目に入る場合もある。<br>
目は偶然目に入ってきた光だけを受け取っているが, ある程度明るい場所では無数の光が様々な方向に飛び交っているので, 周囲の状態を詳しく知覚できる。<br>

<h3>レイトレのしくみ</h3>
シーン内にカメラ, オブジェクト, 光源があるとする。<br>
レイトレーシング法では、カメラから各ピクセルに対応するレイを飛ばしレイがオブジェクトと交差するか計算する。<br>
レイがオブジェクトと交差しない場合はピクセルに背景の色を設定する。<br>
オブジェクトと交差した場合は, 交差した点でのオブジェクトの状態と光源を元にカメラに入射する色を計算(シェーディング)してピクセルに設定する。<br>
このような計算を全ピクセルに対して繰り返す。<br>
レイトレの発展した手法にはモンテカルロレイトレーシング法やフォトンマッピング法などがある。<br>

<h3>ここが欺瞞だ</h3>
今説明したように人間の目は入ってきた光を受け取るだけだが, レイトレではカメラからレイを出しているのである。<br>
現実のカメラはレンズに入射した光がフィルムやイメージセンサーに当たって映像が記録される。<br>
しかしフィルムやセンサーが光か何かを出して何が見えているのか調べることはない。<br>
ここが現実の世界とレイトレの大きな違いである。<br>

<h3>なぜこのような欺瞞がまかり通っているのか?</h3>
正確に光を物理シミュレーションするには, 光源から放たれた無数の光の軌跡を計算する必要がある。<br>
そしてカメラの中に到達する光はそのうちのごく僅かである。<br>
なので正確な光の物理シミュレーションには莫大な量の計算が必要になる。<br>
また, CG屋さんの中には見た目さえそれっぽければ計算の仕方なんでどうでもいいと思っている人がたくさんいる。<br>
我々は常に最新の科学の知識を身につけ, 世の中に欺瞞が少しでも生じないように努力しつづけなければならないのだ。<br>

<h3>どうやってこの欺瞞を打破するのか?</h3>
カメラからはレイなどは一切ださず, 光源からの光だけを正確に計算しなければならない。<br>
だが, それには莫大な計算量が必要だ。<br>
そこで, 欺瞞にならない程度の簡略化を行う。<br>
直接光(光源から直接目に入る光)のみを計算する。<br>
光の反射や屈折を計算しなくていいのか? 欺瞞なのはお前のほうだ! とあなたは思うかもしれない。<br>
宇宙に目を向けよ。<br>
宇宙は非常にスカスカであり, 恒星から放たれた光の殆どは何かにぶつかったりせずに宇宙空間を直進し続けるのである。<br>
具体的に説明しよう。<br>
<a href="http://ja.wikipedia.org/wiki/太陽系">参考URL</a><br>
太陽の直径が139万kmに対し, 地球と太陽の間の距離は1億4959万kmもある。<br>
地球と太陽の間の距離を1とすると, 太陽の直径は0.009, 地球の直径は0.000085になる。<br>
また
<a href="http://ja.wikipedia.org/wiki/宇宙#.E5.AE.87.E5.AE.99.E3.81.AE.E6.88.90.E5.88.86">宇宙の成分</a>
のうち原子はたったの4.9%しかない。<br>
つまり, 宇宙全体から見れば光のが何かにあたって反射や屈折が起こる事はめったにないのである。<br>
なので直接光だけの計算でも宇宙空間のほとんどの場所をレンダリングすることは可能なのである。<br>

<h3>実装せよ</h3>
これから宇宙空間の99%で通用するレンダラを開発する予定をたてようと思う。<br>
レンダラ合宿にはなんとかレンダリング結果をお見せすることができるかもしない。<br>

<br>
</body>
</html>
